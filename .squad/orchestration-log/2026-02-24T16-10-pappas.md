# Pappas — Round 7

**Time:** 2026-02-24T16:10
**Role:** Testing
**Mode:** Background

## Task
Write tests for BLM scraper, USFS scraper, user profile API, user rivers API.

## Output
- Rewrote `test_blm_scraper.py` (88 tests, replacing 42 skipped stubs): advisory type/severity classification, river name extraction, date parsing, API + RSS response parsing, rate limiting, error handling, full integration.
- Created `test_usfs_scraper.py` (71 tests): API key gating, alert type/severity classification, river name extraction, facility/rec area alert parsing, HTTP mocked fetch, rate limiting, full integration.
- Created `user-profile.test.ts` (22 tests): GET profile with counts, PATCH name/email, validation errors, 409 duplicate email, no passwordHash leak, auth enforcement.
- Created `user-rivers.test.ts` (23 tests): GET tracked rivers with conditions/counts, POST add/duplicate/missing, DELETE remove/not-tracked, validation, auth enforcement.
- Discovered BLM `ADVISORY_TYPE_MAP` ordering quirk and `_extract_river_name` greedy regex issue — documented as observations.
- Final counts: Pipeline 566 passed + 43 skipped = 609, Web 345. Total 954.

## Decisions
QA-003, TST-005
